!function(){let e,t,r,a;function n(){location.pathname.includes("products")&&(t=e("#hc_preorderButton, .hc_preorderButton").text())}this.preOrderCustomConfig={enableCartRedirection:!0};async function i(){if(location.pathname.includes("products")){const n=e("form[action='/cart/add']").serializeArray().find(e=>"id"===e.name).value,i=e("#hc_preorderButton, .hc_preorderButton");let d="",o=e("#hc_preordershipsfrom"),s=e("#hc_preordershipsfrom span");if(o.css("visibility","hidden"),i.html(`<span>${t}</span>`).css("text-transform","uppercase"),i.off("click",c),i.siblings().css("display","block"),!await new Promise(function(t,r){e.getJSON(`${window.location.pathname}.js`,function(e){(e.tags.includes("Pre-Order")||e.tags.includes("Back-Order"))&&t(e),r(!1)})}).then(e=>(d=e.tags.includes("Pre-Order")?"Pre-Order":e.tags.includes("Back-Order")?"Back-Order":"",e.variants.find(e=>e.id==n).available)).catch(e=>e))return;const l=e("input[id='hc_backOrderDate']").val(),p=e("input[id='hc_preOrderDate']").val();r="Pre-Order"===d?p:"Back-Order"===d&&l;let u=new Date;u.setHours(0,0,0,0),new Date(r)<u&&(r=""),i.siblings().css("display","none"),a="Pre-Order"===d?"Pre Order":"Back-Order"===d&&"Back Order",i.html(`<span>${a}</span>`).css("text-transform","uppercase"),o.length>0&&(r&&"NULL"!==r&&"_NA_"!==r?(s.html(`${r}`),o.css("visibility","visible")):"Back-Order"===d&&e(".hc_backorderString")&&(o.css("visibility","visible"),r=e(".hc_backorderString").text(),s.html(`${r}`))),i.on("click",c)}else e("input[id='hc_tags']").map(async function(t,r){const a=e(r);if(a.val().includes("Pre-Order")||a.val().includes("Back-Order")){const t=a.siblings("input[id=hc_backOrderDate]").val(),r=a.siblings("input[id=hc_preOrderDate]").val(),n=a.siblings("input[id=hc_continueSelling]").val(),i=a.val().includes("Pre-Order")?"Pre-Order":a.val().includes("Back-Order")&&"Back-Order";if(n&&"true"==n){const n=a.siblings("#hc_preorderButton, .hc_preorderButton"),c=a.parent();let o="Pre-Order"===i?r:"Back-Order"===i&&t,s=new Date;s.setHours(0,0,0,0),new Date(o)<s&&(o="");const l="Pre-Order"===i?"Pre Order":"Back-Order"===i&&"Back Order";n.html(`<span>${l}</span>`).css("text-transform","uppercase"),o&&"_NA_"!=o&&"NULL"!=o||"Back-Order"!==i||!e(".hc_backorderString")||(o=e(".hc_backorderString").text()),n.on("click",{cartForm:c,label:l,date:o},d)}}})}function d(t){t.preventDefault(),t.stopImmediatePropagation();let r=e(`<input id="pre-order-item" name="properties[Note]" value="${t.data.label}" type="hidden"/>`),a=e(`<input id="pre-order-item" name="properties[Expected Ship Date]" value="${t.data.date}" type="hidden"/>`);t.data.cartForm.append(r),t.data.date&&"NULL"!==t.data.date&&"_NA_"!==t.data.date&&t.data.cartForm.append(a),e.ajax({type:"POST",url:"/cart/add.js",data:t.data.cartForm.serialize(),dataType:"JSON",success:function(){preOrderCustomConfig.enableCartRedirection&&location.replace("/cart")}}),r.remove(),t.data.date&&"NULL"!==t.data.date&&"_NA_"!==t.data.date&&a.remove()}function c(t){let n=e("form[action='/cart/add']");t.preventDefault(),t.stopImmediatePropagation();let i=e(`<input id="pre-order-item" name="properties[Note]" value="${a}" type="hidden"/>`),d=e(`<input id="pre-order-item" name="properties[Expected Ship Date]" value="${r}" type="hidden"/>`);n.append(i),r&&"NULL"!==r&&"_NA_"!==r&&n.append(d),e.ajax({type:"POST",url:"/cart/add.js",data:n.serialize(),dataType:"JSON",success:function(){preOrderCustomConfig.enableCartRedirection&&location.replace("/cart")}}),i.remove(),r&&"NULL"!==r&&"_NA_"!==r&&d.remove()}"undefined"==typeof jQuery||parseFloat(jQuery.fn.jquery)<1.7?function(e,t){let r=document.createElement("script");r.type="text/javascript",r.readyState?r.onreadystatechange=function(){"loaded"!=r.readyState&&"complete"!=r.readyState||(r.onreadystatechange=null,t())}:r.onload=function(){t()},r.src=e,document.getElementsByTagName("head")[0].appendChild(r)}("//ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js",function(){(e=jQuery.noConflict(!0))(document).ready(function(){n(),i()})}):(e=jQuery)(document).ready(function(){n(),i()});let o=location.href;new MutationObserver(()=>{location.href!==o&&(o=location.href,i())}).observe(document,{subtree:!0,childList:!0}),e(".tt-product-listing")[0]&&new MutationObserver(()=>{i()}).observe(e(".tt-product-listing")[0],{subtree:!1,childList:!0})}();