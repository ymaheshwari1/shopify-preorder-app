!function(){let e,t,r,a;function n(){location.pathname.includes("products")&&(t=e("#hc_preorderButton, .hc_preorderButton").text())}this.preOrderCustomConfig={enableCartRedirection:!0};async function i(){if(location.pathname.includes("products")){const n=e("form[action='/cart/add']").serializeArray().find(e=>"id"===e.name).value,i=e("#hc_preorderButton, .hc_preorderButton");let c="",s=e("#hc_preordershipsfrom"),o=e("#hc_preordershipsfrom span");s.css("visibility","hidden"),i.html(`<span>${t}</span>`).css("text-transform","uppercase"),i.off("click",d),i.siblings().css("display","block");let l=await new Promise(function(t,r){e.getJSON(`${window.location.pathname}.js`,function(e){(e.tags.includes("Pre-Order")||e.tags.includes("Back-Order"))&&t(e),r(!1)})}).then(e=>(c=e.tags.includes("Pre-Order")?"Pre-Order":e.tags.includes("Back-Order")?"Back-Order":"",e.variants.find(e=>e.id==n).available)).catch(e=>e);if(e("input[class='hc_inventory']").val()>0&&(l=!1),!l)return;const p=e("input[class='hc_backOrderDate']").val(),u=e("input[class='hc_preOrderDate']").val();r="Pre-Order"===c?u:"Back-Order"===c&&p;let h=new Date;h.setHours(0,0,0,0),new Date(r)<h&&(r=""),i.siblings().css("display","none"),a="Pre-Order"===c?"Pre Order":"Back-Order"===c&&"Back Order",i.html(`<span>${a}</span>`).css("text-transform","uppercase"),s.length>0&&(r&&"NULL"!==r&&"_NA_"!==r?(o.html(`${r}`),s.css("visibility","visible")):"Back-Order"===c&&e(".hc_backorderString").length&&(s.css("visibility","visible"),r=e(".hc_backorderString").text(),o.html(`${r}`))),i.off("click"),i.on("click",d)}else e("input[class='hc_tags']").map(async function(t,r){const a=e(r);if(a.val().includes("Pre-Order")||a.val().includes("Back-Order")){const t=a.siblings("input[class=hc_backOrderDate]").val(),r=a.siblings("input[class=hc_preOrderDate]").val(),n=a.siblings("input[class=hc_continueSelling]").val(),i=a.siblings("input[class=hc_inventory]").val(),d=a.val().includes("Pre-Order")?"Pre-Order":a.val().includes("Back-Order")&&"Back-Order";if(n&&"true"==n&&i<=0){const n=a.siblings("#hc_preorderButton, .hc_preorderButton"),i=a.parent();let s="Pre-Order"===d?r:"Back-Order"===d&&t,o=new Date;o.setHours(0,0,0,0),new Date(s)<o&&(s="");const l="Pre-Order"===d?"Pre Order":"Back-Order"===d&&"Back Order";n.html(`<span>${l}</span>`).css("text-transform","uppercase"),s&&"_NA_"!=s&&"NULL"!=s||"Back-Order"!==d||!e(".hc_backorderString").length||(s=e(".hc_backorderString").text()),n.on("click",{cartForm:i,label:l,date:s},c)}}})}function c(t){t.preventDefault(),t.stopImmediatePropagation();let r=e(`<input id="pre-order-item" name="properties[Note]" value="${t.data.label}" type="hidden"/>`),a=e(`<input id="pre-order-item" name="properties[Expected Ship Date]" value="${t.data.date}" type="hidden"/>`);t.data.cartForm.append(r),t.data.date&&"NULL"!==t.data.date&&"_NA_"!==t.data.date&&t.data.cartForm.append(a),e.ajax({type:"POST",url:"/cart/add.js",data:t.data.cartForm.serialize(),dataType:"JSON",success:function(){preOrderCustomConfig.enableCartRedirection&&location.replace("/cart")}}),r.remove(),t.data.date&&"NULL"!==t.data.date&&"_NA_"!==t.data.date&&a.remove()}function d(t){let n=e("form[action='/cart/add']");t.preventDefault(),t.stopImmediatePropagation();let i=e(`<input id="pre-order-item" name="properties[Note]" value="${a}" type="hidden"/>`),c=e(`<input id="pre-order-item" name="properties[Expected Ship Date]" value="${r}" type="hidden"/>`);n.append(i),r&&"NULL"!==r&&"_NA_"!==r&&n.append(c),e.ajax({type:"POST",url:"/cart/add.js",data:n.serialize(),dataType:"JSON",success:function(){preOrderCustomConfig.enableCartRedirection&&location.replace("/cart")}}),i.remove(),r&&"NULL"!==r&&"_NA_"!==r&&c.remove()}"undefined"==typeof jQuery||parseFloat(jQuery.fn.jquery)<1.7?function(e,t){let r=document.createElement("script");r.type="text/javascript",r.readyState?r.onreadystatechange=function(){"loaded"!=r.readyState&&"complete"!=r.readyState||(r.onreadystatechange=null,t())}:r.onload=function(){t()},r.src=e,document.getElementsByTagName("head")[0].appendChild(r)}("//ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js",function(){(e=jQuery.noConflict(!0))(document).ready(function(){n(),i()})}):(e=jQuery)(document).ready(function(){n(),i()});let s=location.href;new MutationObserver(()=>{location.href!==s&&(s=location.href,i())}).observe(document,{subtree:!0,childList:!0}),e(".tt-product-listing")[0]&&new MutationObserver(()=>{i()}).observe(e(".tt-product-listing")[0],{subtree:!1,childList:!0})}();